import{d as W,p as X,u as G,q as J,r as $,ac as Q,s as b,a0 as Y,X as Z,c as w,a,b as e,t as s,w as t,e as n,o as v,i as y,z as x,h as m,ad as ee,ae as te,af as ae,F as le,l as se,y as oe,ag as ne,E as C}from"./index-Myl3Wffr.js";import{u as ie}from"./ticket-b3rCwkfE.js";import{b as N}from"./helpers-BtW4N_bD.js";import{_ as de}from"./_plugin-vue_export-helper-DlAUqK2U.js";const re={class:"profile-view"},ue={class:"page-header"},ce={class:"profile-header"},pe={class:"profile-info"},me={class:"info-item"},_e={key:0,class:"info-item"},fe={class:"info-item"},ve={class:"stat-item"},ge={class:"stat-value"},he={class:"stat-label"},ke={class:"stat-item"},be={class:"stat-value"},we={class:"stat-label"},ye={class:"stat-item"},Se={class:"stat-value"},Ve={class:"stat-label"},Ue=W({__name:"ProfileView",setup(Te){const{t:r,locale:D}=X(),I=G(),_=ie(),M=J(),S=$(Q());function B(l){ne(l),D.value=l,C.success(r("messages.languageChanged"))}const d=b(()=>I.user),E=b(()=>(d.value?.name||"U").split(" ").map(o=>o[0]).join("").toUpperCase().slice(0,2)),g=b(()=>({totalTickets:_.pagination.total,openTickets:_.openTickets.length,resolvedTickets:_.resolvedTickets.length})),u=Y({emailNotifications:!0,ticketUpdates:!0,kbUpdates:!1}),L=$([{id:"1",description:"Submitted ticket TKT-2026-0008",timestamp:new Date().toISOString()},{id:"2",description:'Viewed article "How to Connect to Campus WiFi"',timestamp:new Date(Date.now()-864e5).toISOString()},{id:"3",description:"Updated profile settings",timestamp:new Date(Date.now()-1728e5).toISOString()}]);Z(async()=>{M.setBreadcrumbs([{label:r("nav.dashboard"),path:"/"},{label:r("nav.myProfile")}]),await _.fetchMyTickets(1,10)});function O(l){return{end_user:r("roles.endUser"),support_staff:r("roles.supportStaff"),manager:r("roles.manager"),admin:r("roles.admin")}[l||""]||l||"User"}function z(l){return{end_user:"info",support_staff:"success",manager:"warning",admin:"danger"}[l||""]||"info"}function A(){C.success("Settings saved successfully")}return(l,o)=>{const F=n("el-avatar"),P=n("el-tag"),V=n("el-divider"),h=n("el-icon"),f=n("el-card"),c=n("el-col"),U=n("el-row"),T=n("el-option"),j=n("el-select"),p=n("el-form-item"),k=n("el-switch"),R=n("el-button"),q=n("el-form"),H=n("el-timeline-item"),K=n("el-timeline");return v(),w("div",re,[a("div",ue,[a("h1",null,s(l.$t("profile.title")),1)]),e(U,{gutter:24},{default:t(()=>[e(c,{xs:24,md:8},{default:t(()=>[e(f,{class:"profile-card"},{default:t(()=>[a("div",ce,[e(F,{size:100,src:d.value?.avatar},{default:t(()=>[y(s(E.value),1)]),_:1},8,["src"]),a("h2",null,s(d.value?.name),1),e(P,{type:z(d.value?.role)},{default:t(()=>[y(s(O(d.value?.role)),1)]),_:1},8,["type"])]),e(V),a("div",pe,[a("div",me,[e(h,null,{default:t(()=>[e(m(ee))]),_:1}),a("span",null,s(d.value?.email),1)]),d.value?.department?(v(),w("div",_e,[e(h,null,{default:t(()=>[e(m(te))]),_:1}),a("span",null,s(d.value?.department),1)])):x("",!0),a("div",fe,[e(h,null,{default:t(()=>[e(m(ae))]),_:1}),a("span",null,s(l.$t("profile.joined"))+" "+s(m(N)(d.value?.createdAt||new Date().toISOString())),1)])])]),_:1})]),_:1}),e(c,{xs:24,md:16},{default:t(()=>[e(f,{class:"stats-card"},{header:t(()=>[a("span",null,s(l.$t("profile.activity")),1)]),default:t(()=>[e(U,{gutter:20},{default:t(()=>[e(c,{span:8},{default:t(()=>[a("div",ve,[a("div",ge,s(g.value.totalTickets),1),a("div",he,s(l.$t("profile.totalTickets")),1)])]),_:1}),e(c,{span:8},{default:t(()=>[a("div",ke,[a("div",be,s(g.value.openTickets),1),a("div",we,s(l.$t("profile.openTickets")),1)])]),_:1}),e(c,{span:8},{default:t(()=>[a("div",ye,[a("div",Se,s(g.value.resolvedTickets),1),a("div",Ve,s(l.$t("profile.resolvedTickets")),1)])]),_:1})]),_:1})]),_:1}),e(f,{class:"settings-card"},{header:t(()=>[a("span",null,s(l.$t("profile.settings")),1)]),default:t(()=>[e(q,{"label-position":"left","label-width":"200px"},{default:t(()=>[e(p,{label:l.$t("profile.language")},{default:t(()=>[e(j,{modelValue:S.value,"onUpdate:modelValue":o[0]||(o[0]=i=>S.value=i),onChange:B,style:{width:"200px"}},{default:t(()=>[e(T,{value:"en",label:"English"},{default:t(()=>[...o[4]||(o[4]=[a("span",null,"ðŸ‡ºðŸ‡¸ English",-1)])]),_:1}),e(T,{value:"zh",label:"ä¸­æ–‡"},{default:t(()=>[...o[5]||(o[5]=[a("span",null,"ðŸ‡¨ðŸ‡³ ä¸­æ–‡",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),e(V),e(p,{label:l.$t("profile.emailNotifications")},{default:t(()=>[e(k,{modelValue:u.emailNotifications,"onUpdate:modelValue":o[1]||(o[1]=i=>u.emailNotifications=i)},null,8,["modelValue"])]),_:1},8,["label"]),e(p,{label:l.$t("admin.ticketUpdateNotify")},{default:t(()=>[e(k,{modelValue:u.ticketUpdates,"onUpdate:modelValue":o[2]||(o[2]=i=>u.ticketUpdates=i)},null,8,["modelValue"])]),_:1},8,["label"]),e(p,{label:l.$t("knowledge.title")+" "+l.$t("common.updated")},{default:t(()=>[e(k,{modelValue:u.kbUpdates,"onUpdate:modelValue":o[3]||(o[3]=i=>u.kbUpdates=i)},null,8,["modelValue"])]),_:1},8,["label"]),e(p,null,{default:t(()=>[e(R,{type:"primary",onClick:A},{default:t(()=>[y(s(l.$t("admin.saveChanges")),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(f,{class:"activity-card"},{header:t(()=>[a("span",null,s(l.$t("profile.recentActivity")),1)]),default:t(()=>[e(K,null,{default:t(()=>[(v(!0),w(le,null,se(L.value,i=>(v(),oe(H,{key:i.id,timestamp:m(N)(i.timestamp,"datetime"),placement:"top"},{default:t(()=>[a("span",null,s(i.description),1)]),_:2},1032,["timestamp"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})])}}}),Ie=de(Ue,[["__scopeId","data-v-53ede85c"]]);export{Ie as default};
