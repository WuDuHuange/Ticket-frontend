import{d as he,p as ge,u as ke,q as ye,r as x,s as _,g as be,c as p,b as e,w as t,e as s,o as c,a as r,v as we,h as l,m as $e,x as Ce,t as n,y as v,z as y,A as Te,i,B as K,C as Se,D as Me,G as Ne,H as Ae,F as M,n as q,I as De,J as Ue,K as Ve,L as xe,M as z,N as Ke,O as qe,l as B,P as ze,Q as I,R,S as L,T as Be,U as Ie,V as Re,f as Le}from"./index-CMTRBr-a.js";import{_ as je}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Ee={class:"main-layout"},Fe={class:"logo-container"},Pe={class:"sidebar-footer"},Qe={class:"header-left"},Ge={class:"header-right"},He={class:"notification-panel"},Je={class:"notification-header"},Oe={class:"notification-title"},We={key:0,class:"notification-empty"},Xe={key:1,class:"notification-list"},Ye=["onClick"],Ze={class:"notification-content"},et={class:"notification-text"},tt={class:"notification-time"},at={class:"user-info"},nt={class:"user-name"},ot=he({__name:"MainLayout",setup(st){const{t:m}=ge(),j=be(),b=Le(),f=ke(),C=ye(),w=x(""),g=x([{id:"1",type:"ticket",message:m("notifications.ticketAssigned",{id:"TKT-2026-0012"}),time:new Date(Date.now()-1e3*60*5),read:!1,link:"/tickets/TKT-2026-0012"},{id:"2",type:"ticket",message:m("notifications.ticketUpdated",{id:"TKT-2026-0008"}),time:new Date(Date.now()-1e3*60*30),read:!1,link:"/tickets/TKT-2026-0008"},{id:"3",type:"system",message:m("notifications.systemMaintenance"),time:new Date(Date.now()-1e3*60*60*2),read:!1}]),N=_(()=>g.value.filter(a=>!a.read).length);function E(a){switch(a){case"ticket":return K;case"system":return z;default:return L}}function F(a){const o=new Date().getTime()-a.getTime(),d=Math.floor(o/(1e3*60)),h=Math.floor(o/(1e3*60*60)),T=Math.floor(o/(1e3*60*60*24));return d<1?m("common.justNow"):d<60?m("common.minutesAgo",{n:d}):h<24?m("common.hoursAgo",{n:h}):m("common.daysAgo",{n:T})}function P(a){a.read=!0,a.link&&b.push(a.link)}function Q(){g.value.forEach(a=>a.read=!0)}const $=_(()=>C.sidebarCollapsed),G=_(()=>$.value?"64px":"220px"),H=_(()=>j.path),J=_(()=>C.breadcrumbs),O=_(()=>f.userName||"User"),W=_(()=>f.userAvatar),X=_(()=>(f.userName||"U").split(" ").map(k=>k[0]).join("").toUpperCase().slice(0,2)),Y=_(()=>f.isStaff),Z=_(()=>f.isManager),A=_(()=>f.isAdmin);function ee(){C.toggleSidebar()}function te(){w.value&&b.push({path:"/knowledge",query:{q:w.value}})}async function ae(a){switch(a){case"profile":b.push("/profile");break;case"logout":await f.logout(),b.push("/login");break}}return(a,k)=>{const o=s("el-icon"),d=s("el-menu-item"),h=s("el-divider"),T=s("el-sub-menu"),ne=s("el-menu"),S=s("el-button"),oe=s("el-aside"),se=s("el-breadcrumb-item"),le=s("el-breadcrumb"),ie=s("el-input"),de=s("el-badge"),ue=s("el-empty"),ce=s("el-popover"),re=s("el-avatar"),D=s("el-dropdown-item"),_e=s("el-dropdown-menu"),me=s("el-dropdown"),fe=s("el-header"),pe=s("router-view"),ve=s("el-main"),U=s("el-container");return c(),p("div",Ee,[e(U,{class:"layout-container"},{default:t(()=>[e(oe,{width:G.value,class:"sidebar"},{default:t(()=>[r("div",Fe,[e(o,{size:28,class:"logo-icon"},{default:t(()=>[e(l($e))]),_:1}),we(r("span",{class:"logo-text"},n(a.$t("header.title")),513),[[Ce,!$.value]])]),e(ne,{"default-active":H.value,class:"sidebar-menu",collapse:$.value,router:""},{default:t(()=>[e(d,{index:"/"},{title:t(()=>[i(n(a.$t("nav.dashboard")),1)]),default:t(()=>[e(o,null,{default:t(()=>[e(l(Te))]),_:1})]),_:1}),Y.value?(c(),v(d,{key:0,index:"/tickets"},{title:t(()=>[i(n(a.$t("nav.allTickets")),1)]),default:t(()=>[e(o,null,{default:t(()=>[e(l(K))]),_:1})]),_:1})):y("",!0),e(d,{index:"/my-tickets"},{title:t(()=>[i(n(a.$t("nav.myTickets")),1)]),default:t(()=>[e(o,null,{default:t(()=>[e(l(Se))]),_:1})]),_:1}),e(d,{index:"/tickets/create"},{title:t(()=>[i(n(a.$t("nav.submitTicket")),1)]),default:t(()=>[e(o,null,{default:t(()=>[e(l(Me))]),_:1})]),_:1}),e(h),e(d,{index:"/knowledge"},{title:t(()=>[i(n(a.$t("nav.knowledgeBase")),1)]),default:t(()=>[e(o,null,{default:t(()=>[e(l(Ne))]),_:1})]),_:1}),e(d,{index:"/faq"},{title:t(()=>[i(n(a.$t("nav.faq")),1)]),default:t(()=>[e(o,null,{default:t(()=>[e(l(Ae))]),_:1})]),_:1}),Z.value?(c(),p(M,{key:1},[e(h),e(T,{index:"/admin"},{title:t(()=>[e(o,null,{default:t(()=>[e(l(z))]),_:1}),r("span",null,n(a.$t("nav.administration")),1)]),default:t(()=>[A.value?(c(),v(d,{key:0,index:"/admin/users"},{default:t(()=>[e(o,null,{default:t(()=>[e(l(q))]),_:1}),i(" "+n(a.$t("nav.userManagement")),1)]),_:1})):y("",!0),e(d,{index:"/admin/teams"},{default:t(()=>[e(o,null,{default:t(()=>[e(l(De))]),_:1}),i(" "+n(a.$t("nav.teamManagement")),1)]),_:1}),e(d,{index:"/admin/articles"},{default:t(()=>[e(o,null,{default:t(()=>[e(l(Ue))]),_:1}),i(" "+n(a.$t("nav.articleManagement")),1)]),_:1}),e(d,{index:"/admin/analytics"},{default:t(()=>[e(o,null,{default:t(()=>[e(l(Ve))]),_:1}),i(" "+n(a.$t("nav.analytics")),1)]),_:1}),A.value?(c(),v(d,{key:1,index:"/admin/settings"},{default:t(()=>[e(o,null,{default:t(()=>[e(l(xe))]),_:1}),i(" "+n(a.$t("nav.systemSettings")),1)]),_:1})):y("",!0)]),_:1})],64)):y("",!0)]),_:1},8,["default-active","collapse"]),r("div",Pe,[e(S,{icon:$.value?l(Ke):l(qe),onClick:ee,text:"",class:"collapse-btn"},null,8,["icon"])])]),_:1},8,["width"]),e(U,{class:"main-container"},{default:t(()=>[e(fe,{class:"header"},{default:t(()=>[r("div",Qe,[e(le,{separator:"/"},{default:t(()=>[(c(!0),p(M,null,B(J.value,(u,V)=>(c(),v(se,{key:V,to:u.path?{path:u.path}:void 0},{default:t(()=>[i(n(u.label),1)]),_:2},1032,["to"]))),128))]),_:1})]),r("div",Ge,[e(ie,{modelValue:w.value,"onUpdate:modelValue":k[0]||(k[0]=u=>w.value=u),placeholder:a.$t("common.search"),"prefix-icon":"Search",class:"search-input",clearable:"",onKeyup:ze(te,["enter"])},null,8,["modelValue","placeholder"]),e(ce,{placement:"bottom-end",width:360,trigger:"click"},{reference:t(()=>[e(de,{value:N.value,hidden:N.value===0,class:"notification-badge"},{default:t(()=>[e(S,{icon:l(L),circle:""},null,8,["icon"])]),_:1},8,["value","hidden"])]),default:t(()=>[r("div",He,[r("div",Je,[r("span",Oe,n(a.$t("nav.notifications")),1),g.value.length>0?(c(),v(S,{key:0,type:"primary",link:"",size:"small",onClick:Q},{default:t(()=>[i(n(a.$t("profile.markAllRead")),1)]),_:1})):y("",!0)]),e(h,{style:{margin:"8px 0"}}),g.value.length===0?(c(),p("div",We,[e(ue,{description:a.$t("nav.noNotifications"),"image-size":60},null,8,["description"])])):(c(),p("div",Xe,[(c(!0),p(M,null,B(g.value,u=>(c(),p("div",{key:u.id,class:I(["notification-item",{unread:!u.read}]),onClick:V=>P(u)},[e(o,{class:I(["notification-icon",u.type])},{default:t(()=>[(c(),v(R(E(u.type))))]),_:2},1032,["class"]),r("div",Ze,[r("div",et,n(u.message),1),r("div",tt,n(F(u.time)),1)])],10,Ye))),128))]))])]),_:1}),e(me,{trigger:"click",onCommand:ae},{dropdown:t(()=>[e(_e,null,{default:t(()=>[e(D,{command:"profile"},{default:t(()=>[e(o,null,{default:t(()=>[e(l(q))]),_:1}),i(" "+n(a.$t("nav.myProfile")),1)]),_:1}),e(D,{divided:"",command:"logout"},{default:t(()=>[e(o,null,{default:t(()=>[e(l(Ie))]),_:1}),i(" "+n(a.$t("common.logout")),1)]),_:1})]),_:1})]),default:t(()=>[r("div",at,[e(re,{size:32,src:W.value},{default:t(()=>[i(n(X.value),1)]),_:1},8,["src"]),r("span",nt,n(O.value),1),e(o,null,{default:t(()=>[e(l(Be))]),_:1})])]),_:1})])]),_:1}),e(ve,{class:"main-content"},{default:t(()=>[e(pe,null,{default:t(({Component:u})=>[e(Re,{name:"fade",mode:"out-in"},{default:t(()=>[(c(),v(R(u)))]),_:2},1024)]),_:1})]),_:1})]),_:1})]),_:1})])}}}),dt=je(ot,[["__scopeId","data-v-ac5b3d39"]]);export{dt as default};
