import{d as E,k as L,l as G,p as h,ai as H,o as J,ak as O,c as z,e as _,f as t,t as u,w as s,g as l,U as Q,A as p,s as W,x as w,y as $,a2 as X,i as g,b as Y,h as f}from"./index-Bo1QE9TC.js";import{u as Z}from"./ticket-Cd9x3L1M.js";import{g as x,a as ee,b as te,f as ae,d as se}from"./helpers-BtQK9j-g.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";const oe={class:"assigned-tickets-view"},ne={class:"page-header"},ie={class:"ticket-title"},re={key:1,class:"pagination-wrapper"},ue=E({__name:"AssignedTicketsView",setup(de){const C=Y(),{t:d}=L(),i=Z(),V=G(),A=h(()=>i.loading),b=h(()=>i.tickets),r=h(()=>i.pagination),o=H({status:"",keyword:""});function N(e){return{new:d("tickets.statusNew"),assigned:d("tickets.statusAssigned"),in_progress:d("tickets.statusInProgress"),pending_user:d("tickets.statusPendingUser"),resolved:d("tickets.statusResolved"),closed:d("tickets.statusClosed")}[e]||e}J(async()=>{V.setBreadcrumbs([{label:d("nav.dashboard"),path:"/"},{label:d("nav.assignedTickets")}]),await i.fetchAssignedTickets(1,10)}),O(async()=>{await i.fetchAssignedTickets(1,r.value.pageSize||10,o.status||void 0)});function P(e){C.push(`/tickets/${e.id}`)}async function k(){await i.fetchAssignedTickets(1,r.value.pageSize,o.status||void 0)}async function U(){o.status="",o.keyword="",await i.fetchAssignedTickets(1,r.value.pageSize)}async function B(e){await i.fetchAssignedTickets(1,e,o.status||void 0)}async function I(e){await i.fetchAssignedTickets(e,r.value.pageSize,o.status||void 0)}return(e,n)=>{const m=l("el-option"),R=l("el-select"),v=l("el-form-item"),D=l("el-input"),S=l("el-button"),M=l("el-form"),T=l("el-card"),c=l("el-table-column"),y=l("el-tag"),q=l("el-table"),F=l("el-empty"),K=l("el-pagination"),j=X("loading");return f(),z("div",oe,[_("div",ne,[_("h1",null,u(e.$t("tickets.assignedToMe")),1)]),t(T,{class:"filter-card"},{default:s(()=>[t(M,{inline:!0,model:o,class:"filter-form"},{default:s(()=>[t(v,{label:e.$t("common.status")},{default:s(()=>[t(R,{modelValue:o.status,"onUpdate:modelValue":n[0]||(n[0]=a=>o.status=a),placeholder:e.$t("tickets.filterByStatus"),clearable:"",onChange:k},{default:s(()=>[t(m,{label:e.$t("tickets.statusNew"),value:"new"},null,8,["label"]),t(m,{label:e.$t("tickets.statusAssigned"),value:"assigned"},null,8,["label"]),t(m,{label:e.$t("tickets.statusInProgress"),value:"in_progress"},null,8,["label"]),t(m,{label:e.$t("tickets.statusPendingUser"),value:"pending_user"},null,8,["label"]),t(m,{label:e.$t("tickets.statusResolved"),value:"resolved"},null,8,["label"]),t(m,{label:e.$t("tickets.statusClosed"),value:"closed"},null,8,["label"])]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),t(v,{label:e.$t("common.search")},{default:s(()=>[t(D,{modelValue:o.keyword,"onUpdate:modelValue":n[1]||(n[1]=a=>o.keyword=a),placeholder:e.$t("tickets.searchTickets"),clearable:"",onKeyup:Q(k,["enter"]),onClear:k},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(v,null,{default:s(()=>[t(S,{type:"primary",onClick:k},{default:s(()=>[p(u(e.$t("common.search")),1)]),_:1}),t(S,{onClick:U},{default:s(()=>[p(u(e.$t("common.reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(T,{class:"table-card"},{default:s(()=>[W((f(),w(q,{data:b.value,style:{width:"100%"},onRowClick:P,"row-class-name":"clickable-row"},{default:s(()=>[t(c,{prop:"id",label:e.$t("tickets.ticketId"),width:"150"},null,8,["label"]),t(c,{prop:"title",label:e.$t("common.title"),"min-width":"250"},{default:s(({row:a})=>[_("div",ie,[_("span",null,u(a.title),1),a.slaBreached?(f(),w(y,{key:0,type:"danger",size:"small"},{default:s(()=>[...n[4]||(n[4]=[p("SLA",-1)])]),_:1})):$("",!0)])]),_:1},8,["label"]),t(c,{prop:"category",label:e.$t("common.category"),width:"150"},{default:s(({row:a})=>[p(u(a.category?.name||"N/A"),1)]),_:1},8,["label"]),t(c,{prop:"requesterName",label:e.$t("tickets.requester"),width:"130"},null,8,["label"]),t(c,{prop:"status",label:e.$t("common.status"),width:"130"},{default:s(({row:a})=>[t(y,{type:g(x)(a.status),size:"small"},{default:s(()=>[p(u(N(a.status)),1)]),_:2},1032,["type"])]),_:1},8,["label"]),t(c,{prop:"priority",label:e.$t("common.priority"),width:"110"},{default:s(({row:a})=>[t(y,{type:g(ee)(a.priority),size:"small",effect:"plain"},{default:s(()=>[p(u(g(te)(a.priority)),1)]),_:2},1032,["type"])]),_:1},8,["label"]),t(c,{prop:"createdAt",label:e.$t("common.created"),width:"140"},{default:s(({row:a})=>[p(u(g(ae)(a.createdAt)),1)]),_:1},8,["label"]),t(c,{prop:"updatedAt",label:e.$t("common.updated"),width:"140"},{default:s(({row:a})=>[p(u(g(se)(a.updatedAt)),1)]),_:1},8,["label"])]),_:1},8,["data"])),[[j,A.value]]),!A.value&&b.value.length===0?(f(),w(F,{key:0,description:e.$t("tickets.noAssignedTickets")},null,8,["description"])):$("",!0),b.value.length>0?(f(),z("div",re,[t(K,{"current-page":r.value.page,"onUpdate:currentPage":n[2]||(n[2]=a=>r.value.page=a),"page-size":r.value.pageSize,"onUpdate:pageSize":n[3]||(n[3]=a=>r.value.pageSize=a),total:r.value.total,"page-sizes":[10,20,50],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:B,onCurrentChange:I},null,8,["current-page","page-size","total"])])):$("",!0)]),_:1})])}}}),fe=le(ue,[["__scopeId","data-v-05489152"]]);export{fe as default};
