import{d as O,p as W,q as Z,s as k,r as C,X as x,g as ee,a6 as te,c as _,a,z as q,t as l,b as o,w as s,P as ae,e as v,F as P,l as B,v as se,_ as le,y as f,o as n,i as c,h,a7 as oe,f as ne,R as ie,Q as ce,a2 as re,$ as ue,Y as de,H as _e,J as D,a8 as ve,a9 as pe,m as ge,M as fe}from"./index-Myl3Wffr.js";import{u as me}from"./knowledge-BHeNciVK.js";import{b as he}from"./helpers-BtW4N_bD.js";import{_ as ye}from"./_plugin-vue_export-helper-DlAUqK2U.js";const we={class:"knowledge-list-view"},ke={class:"page-header"},Ce={class:"header-content"},$e={class:"search-section"},ze={class:"categories-section"},be={class:"article-count"},Se={key:0,class:"active-filter"},Ae={class:"articles-section"},Ve={key:0,class:"article-list"},qe=["onClick"],Pe={class:"article-main"},Be={class:"article-title"},Fe={class:"article-summary"},Ne={class:"article-meta"},De={class:"category"},Ke={class:"views"},Ie={class:"date"},Ue={class:"article-tags"},Le={key:2,class:"pagination-wrapper"},Qe=O({__name:"KnowledgeListView",setup(Re){const $=ee(),K=ne(),{t:F}=W(),p=me(),I=Z(),U=k(()=>p.loading),z=k(()=>p.articles),L=k(()=>p.categories),Q=k(()=>p.pagination.total),r=C(""),i=C(""),u=C(1),y=C(10),R={Hardware:ge,Software:D,Network:pe,"Account & Access":ve,Email:D,General:_e};x(async()=>{I.setBreadcrumbs([{label:F("nav.dashboard"),path:"/"},{label:F("knowledge.title")}]),$.query.q&&(r.value=$.query.q),await Promise.all([p.fetchCategories(),g()])}),te(()=>$.query.q,e=>{e&&(r.value=e,b())});function E(e){return R[e]||fe}function Ee(e){return e}function H(e){K.push(`/knowledge/${e}`)}async function g(){await p.fetchPublicArticles(u.value,y.value,r.value||void 0,i.value||void 0)}async function b(){i.value="",u.value=1,await g()}async function M(e){i.value===e?i.value="":i.value=e,r.value="",u.value=1,await g()}async function S(){r.value="",i.value="",u.value=1,await g()}async function G(e){y.value=e,u.value=1,await g()}async function J(e){u.value=e,await g()}return(e,d)=>{const m=v("el-icon"),A=v("el-button"),T=v("el-input"),N=v("el-card"),V=v("el-tag"),X=v("el-empty"),Y=v("el-pagination"),j=le("loading");return n(),_("div",we,[a("div",ke,[a("div",Ce,[a("h1",null,l(e.$t("knowledge.title")),1),a("p",null,l(e.$t("knowledge.subtitle")),1)])]),a("div",$e,[o(T,{modelValue:r.value,"onUpdate:modelValue":d[0]||(d[0]=t=>r.value=t),placeholder:e.$t("knowledge.searchPlaceholder"),size:"large",class:"search-input",clearable:"",onKeyup:ae(b,["enter"])},{prefix:s(()=>[o(m,null,{default:s(()=>[o(h(oe))]),_:1})]),append:s(()=>[o(A,{type:"primary",onClick:b},{default:s(()=>[c(l(e.$t("common.search")),1)]),_:1})]),_:1},8,["modelValue","placeholder"])]),a("div",ze,[(n(!0),_(P,null,B(L.value,t=>(n(),f(N,{key:t,class:ce(["category-card",{active:i.value===t}]),onClick:w=>M(t)},{default:s(()=>[o(m,{size:32,class:"category-icon"},{default:s(()=>[(n(),f(ie(E(t))))]),_:2},1024),a("h3",null,l(t),1),a("span",be,l(e.$t("knowledge.viewArticles")),1)]),_:2},1032,["onClick","class"]))),128))]),i.value||r.value?(n(),_("div",Se,[o(V,{closable:"",onClose:S},{default:s(()=>[c(l(i.value?i.value:`${e.$t("common.search")}: "${r.value}"`),1)]),_:1}),o(A,{text:"",type:"primary",onClick:S},{default:s(()=>[c(l(e.$t("common.clearFilter")),1)]),_:1})])):q("",!0),a("div",Ae,[se((n(),f(N,{class:"articles-card"},{default:s(()=>[z.value.length>0?(n(),_("div",Ve,[(n(!0),_(P,null,B(z.value,t=>(n(),_("div",{key:t.id,class:"article-item",onClick:w=>H(t.id)},[a("div",Pe,[a("h3",Be,[c(l(t.title)+" ",1),t.isFAQ?(n(),f(V,{key:0,type:"success",size:"small"},{default:s(()=>[...d[3]||(d[3]=[c("FAQ",-1)])]),_:1})):q("",!0)]),a("p",Fe,l(t.summary),1),a("div",Ne,[a("span",De,[o(m,null,{default:s(()=>[o(h(re))]),_:1}),c(" "+l(t.category),1)]),a("span",Ke,[o(m,null,{default:s(()=>[o(h(ue))]),_:1}),c(" "+l(t.viewCount)+" "+l(e.$t("knowledge.viewCount")),1)]),a("span",Ie,[o(m,null,{default:s(()=>[o(h(de))]),_:1}),c(" "+l(h(he)(t.updatedAt)),1)])])]),a("div",Ue,[(n(!0),_(P,null,B(t.tags.slice(0,3),w=>(n(),f(V,{key:w,size:"small",effect:"plain"},{default:s(()=>[c(l(w),1)]),_:2},1024))),128))])],8,qe))),128))])):(n(),f(X,{key:1,description:e.$t("knowledge.noArticles")},{default:s(()=>[o(A,{type:"primary",onClick:S},{default:s(()=>[c(l(e.$t("knowledge.allCategories")),1)]),_:1})]),_:1},8,["description"])),z.value.length>0?(n(),_("div",Le,[o(Y,{"current-page":u.value,"onUpdate:currentPage":d[1]||(d[1]=t=>u.value=t),"page-size":y.value,"onUpdate:pageSize":d[2]||(d[2]=t=>y.value=t),total:Q.value,"page-sizes":[10,20,50],layout:"total, sizes, prev, pager, next",onSizeChange:G,onCurrentChange:J},null,8,["current-page","page-size","total"])])):q("",!0)]),_:1})),[[j,U.value]])])])}}}),Te=ye(Qe,[["__scopeId","data-v-0718d315"]]);export{Te as default};
