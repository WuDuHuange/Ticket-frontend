import{d as J,p as L,q as P,s as T,r as I,X as U,g as X,v as Y,Y as j,c as k,y as h,z as $,F as C,a as s,b as e,w as t,e as _,o as u,i as n,h as d,a7 as G,t as a,n as O,a1 as W,ae as Z,a2 as x,ah as ee,l as S,J as te,B as le,f as ae,E as se}from"./index-CMTRBr-a.js";import{u as oe}from"./knowledge-DZdYERT8.js";import{a as ne}from"./index-DLq5dEyX.js";/* empty css                */import{f as de}from"./helpers-BtQK9j-g.js";import{_ as ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ue={class:"article-detail-view"},ce={class:"page-header"},re={class:"article-header"},_e={class:"article-tags"},fe={class:"article-title"},pe={class:"article-meta"},ve={class:"article-content"},ke={class:"feedback-section"},ge={class:"feedback-buttons"},me={class:"tag-list"},he={class:"related-list"},we=["onClick"],ye=J({__name:"ArticleDetailView",setup(be){const q=X(),g=ae(),{t:w}=L(),f=oe(),E=P(),A=T(()=>f.loading),o=T(()=>f.currentArticle),p=I(null),y=I([]);U(async()=>{const l=q.params.id;await f.fetchArticleById(l),o.value&&(E.setBreadcrumbs([{label:w("nav.dashboard"),path:"/"},{label:w("knowledge.title"),path:"/knowledge"},{label:o.value.title}]),await f.fetchPublicArticles(1,5,void 0,o.value.category),y.value=f.articles.filter(c=>c.id!==o.value?.id).slice(0,4))});function B(){g.push("/knowledge")}function H(l){g.push(`/knowledge/${l}`)}function R(l){g.push({path:"/knowledge",query:{q:l}})}function z(){g.push("/tickets/create")}function N(l){if(p.value===l){p.value=null;return}p.value=l,se.success(w("knowledge.thanksFeedback"))}return(l,c)=>{const r=_("el-icon"),v=_("el-button"),b=_("el-tag"),V=_("el-divider"),m=_("el-card"),D=_("el-col"),F=_("el-empty"),K=_("el-row"),M=j("loading");return Y((u(),k("div",ue,[o.value?(u(),k(C,{key:0},[s("div",ce,[e(v,{text:"",onClick:B},{default:t(()=>[e(r,null,{default:t(()=>[e(d(G))]),_:1}),n(" "+a(l.$t("knowledge.backToKB")),1)]),_:1})]),e(K,{gutter:24},{default:t(()=>[e(D,{xs:24,lg:18},{default:t(()=>[e(m,{class:"article-card"},{default:t(()=>[s("div",re,[s("div",_e,[e(b,{type:"info"},{default:t(()=>[n(a(o.value.category),1)]),_:1}),o.value.isFAQ?(u(),h(b,{key:0,type:"success"},{default:t(()=>[...c[2]||(c[2]=[n("FAQ",-1)])]),_:1})):$("",!0)]),s("h1",fe,a(o.value.title),1),s("div",pe,[s("span",null,[e(r,null,{default:t(()=>[e(d(O))]),_:1}),n(" "+a(o.value.authorName),1)]),s("span",null,[e(r,null,{default:t(()=>[e(d(W))]),_:1}),n(" "+a(l.$t("knowledge.updated"))+" "+a(d(de)(o.value.updatedAt,"long")),1)]),s("span",null,[e(r,null,{default:t(()=>[e(d(Z))]),_:1}),n(" "+a(o.value.viewCount)+" "+a(l.$t("knowledge.viewCount")),1)])])]),e(V),s("div",ve,[e(d(ne),{modelValue:o.value.content,previewTheme:"github"},null,8,["modelValue"])]),e(V),s("div",ke,[s("h3",null,a(l.$t("knowledge.helpful")),1),s("div",ge,[e(v,{type:p.value==="helpful"?"success":"default",onClick:c[0]||(c[0]=i=>N("helpful"))},{default:t(()=>[e(r,null,{default:t(()=>[e(d(x))]),_:1}),n(" "+a(l.$t("knowledge.yes"))+" ("+a(o.value.helpfulCount)+") ",1)]),_:1},8,["type"]),e(v,{type:p.value==="not_helpful"?"danger":"default",onClick:c[1]||(c[1]=i=>N("not_helpful"))},{default:t(()=>[e(r,null,{default:t(()=>[e(d(ee))]),_:1}),n(" "+a(l.$t("knowledge.no"))+" ("+a(o.value.notHelpfulCount)+") ",1)]),_:1},8,["type"])])])]),_:1})]),_:1}),e(D,{xs:24,lg:6},{default:t(()=>[e(m,{class:"sidebar-card"},{header:t(()=>[s("span",null,a(l.$t("knowledge.tags")),1)]),default:t(()=>[s("div",me,[(u(!0),k(C,null,S(o.value.tags,i=>(u(),h(b,{key:i,effect:"plain",onClick:Q=>R(i),class:"clickable-tag"},{default:t(()=>[n(a(i),1)]),_:2},1032,["onClick"]))),128))])]),_:1}),e(m,{class:"sidebar-card"},{header:t(()=>[s("span",null,a(l.$t("knowledge.relatedArticles")),1)]),default:t(()=>[s("div",he,[(u(!0),k(C,null,S(y.value,i=>(u(),k("div",{key:i.id,class:"related-item",onClick:Q=>H(i.id)},[e(r,null,{default:t(()=>[e(d(te))]),_:1}),s("span",null,a(i.title),1)],8,we))),128)),y.value.length===0?(u(),h(F,{key:0,description:l.$t("knowledge.noRelated"),"image-size":60},null,8,["description"])):$("",!0)])]),_:1}),e(m,{class:"sidebar-card help-card"},{default:t(()=>[s("h3",null,a(l.$t("knowledge.stillNeedHelp")),1),s("p",null,a(l.$t("knowledge.stillNeedHelpDesc")),1),e(v,{type:"primary",onClick:z},{default:t(()=>[e(r,null,{default:t(()=>[e(d(le))]),_:1}),n(" "+a(l.$t("knowledge.submitTicket")),1)]),_:1})]),_:1})]),_:1})]),_:1})],64)):A.value?$("",!0):(u(),h(F,{key:1,description:l.$t("knowledge.articleNotFound")},{default:t(()=>[e(v,{type:"primary",onClick:B},{default:t(()=>[n(a(l.$t("knowledge.goBack")),1)]),_:1})]),_:1},8,["description"]))])),[[M,A.value]])}}}),De=ie(ye,[["__scopeId","data-v-0d2645ef"]]);export{De as default};
