import{d as W,k as Y,l as Z,n as k,r as C,o as x,a as ee,ac as te,c as _,e as a,s as q,t as l,f as o,w as s,P as ae,g as p,F as P,O as B,p as se,X as le,q as m,y as c,i as h,a2 as oe,b as ne,h as n,R as ie,Q as ce,a7 as re,ad as ue,a0 as de,D as _e,I as N,ae as pe,af as ve,m as fe,L as me}from"./index-C3uyuHtt.js";import"./tickets-CV57FQXZ.js";import{u as ge}from"./knowledge-Dc1nrdqu.js";import{f as he}from"./helpers-BtQK9j-g.js";import{_ as ye}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BrCbebx6.js";const we={class:"knowledge-list-view"},ke={class:"page-header"},Ce={class:"header-content"},$e={class:"search-section"},ze={class:"categories-section"},be={class:"article-count"},Se={key:0,class:"active-filter"},Ae={class:"articles-section"},Ve={key:0,class:"article-list"},qe=["onClick"],Pe={class:"article-main"},Be={class:"article-title"},De={class:"article-summary"},Fe={class:"article-meta"},Ne={class:"category"},Ie={class:"views"},Ke={class:"date"},Le={class:"article-tags"},Ue={key:2,class:"pagination-wrapper"},Qe=W({__name:"KnowledgeListView",setup(Re){const $=ee(),I=ne(),{t:D}=Y(),v=ge(),K=Z(),L=k(()=>v.loading),z=k(()=>v.articles),U=k(()=>v.categories),Q=k(()=>v.pagination.total),r=C(""),i=C(""),u=C(1),y=C(10),R={Hardware:fe,Software:N,Network:ve,"Account & Access":pe,Email:N,General:_e};x(async()=>{K.setBreadcrumbs([{label:D("nav.dashboard"),path:"/"},{label:D("knowledge.title")}]),$.query.q&&(r.value=$.query.q),await Promise.all([v.fetchCategories(),f()])}),te(()=>$.query.q,e=>{e&&(r.value=e,b())});function E(e){return R[e]||me}function Ee(e){return e}function G(e){I.push(`/knowledge/${e}`)}async function f(){await v.fetchPublicArticles(u.value,y.value,r.value||void 0,i.value||void 0)}async function b(){i.value="",u.value=1,await f()}async function H(e){i.value===e?i.value="":i.value=e,r.value="",u.value=1,await f()}async function S(){r.value="",i.value="",u.value=1,await f()}async function M(e){y.value=e,u.value=1,await f()}async function O(e){u.value=e,await f()}return(e,d)=>{const g=p("el-icon"),A=p("el-button"),T=p("el-input"),F=p("el-card"),V=p("el-tag"),X=p("el-empty"),j=p("el-pagination"),J=le("loading");return n(),_("div",we,[a("div",ke,[a("div",Ce,[a("h1",null,l(e.$t("knowledge.title")),1),a("p",null,l(e.$t("knowledge.subtitle")),1)])]),a("div",$e,[o(T,{modelValue:r.value,"onUpdate:modelValue":d[0]||(d[0]=t=>r.value=t),placeholder:e.$t("knowledge.searchPlaceholder"),size:"large",class:"search-input",clearable:"",onKeyup:ae(b,["enter"])},{prefix:s(()=>[o(g,null,{default:s(()=>[o(h(oe))]),_:1})]),append:s(()=>[o(A,{type:"primary",onClick:b},{default:s(()=>[c(l(e.$t("common.search")),1)]),_:1})]),_:1},8,["modelValue","placeholder"])]),a("div",ze,[(n(!0),_(P,null,B(U.value,t=>(n(),m(F,{key:t,class:ce(["category-card",{active:i.value===t}]),onClick:w=>H(t)},{default:s(()=>[o(g,{size:32,class:"category-icon"},{default:s(()=>[(n(),m(ie(E(t))))]),_:2},1024),a("h3",null,l(t),1),a("span",be,l(e.$t("knowledge.viewArticles")),1)]),_:2},1032,["onClick","class"]))),128))]),i.value||r.value?(n(),_("div",Se,[o(V,{closable:"",onClose:S},{default:s(()=>[c(l(i.value?i.value:`${e.$t("common.search")}: "${r.value}"`),1)]),_:1}),o(A,{text:"",type:"primary",onClick:S},{default:s(()=>[c(l(e.$t("common.clearFilter")),1)]),_:1})])):q("",!0),a("div",Ae,[se((n(),m(F,{class:"articles-card"},{default:s(()=>[z.value.length>0?(n(),_("div",Ve,[(n(!0),_(P,null,B(z.value,t=>(n(),_("div",{key:t.id,class:"article-item",onClick:w=>G(t.id)},[a("div",Pe,[a("h3",Be,[c(l(t.title)+" ",1),t.isFAQ?(n(),m(V,{key:0,type:"success",size:"small"},{default:s(()=>[...d[3]||(d[3]=[c("FAQ",-1)])]),_:1})):q("",!0)]),a("p",De,l(t.summary),1),a("div",Fe,[a("span",Ne,[o(g,null,{default:s(()=>[o(h(re))]),_:1}),c(" "+l(t.category),1)]),a("span",Ie,[o(g,null,{default:s(()=>[o(h(ue))]),_:1}),c(" "+l(t.viewCount)+" "+l(e.$t("knowledge.viewCount")),1)]),a("span",Ke,[o(g,null,{default:s(()=>[o(h(de))]),_:1}),c(" "+l(h(he)(t.updatedAt)),1)])])]),a("div",Le,[(n(!0),_(P,null,B(t.tags.slice(0,3),w=>(n(),m(V,{key:w,size:"small",effect:"plain"},{default:s(()=>[c(l(w),1)]),_:2},1024))),128))])],8,qe))),128))])):(n(),m(X,{key:1,description:e.$t("knowledge.noArticles")},{default:s(()=>[o(A,{type:"primary",onClick:S},{default:s(()=>[c(l(e.$t("knowledge.allCategories")),1)]),_:1})]),_:1},8,["description"])),z.value.length>0?(n(),_("div",Ue,[o(j,{"current-page":u.value,"onUpdate:currentPage":d[1]||(d[1]=t=>u.value=t),"page-size":y.value,"onUpdate:pageSize":d[2]||(d[2]=t=>y.value=t),total:Q.value,"page-sizes":[10,20,50],layout:"total, sizes, prev, pager, next",onSizeChange:M,onCurrentChange:O},null,8,["current-page","page-size","total"])])):q("",!0)]),_:1})),[[J,L.value]])])])}}}),je=ye(Qe,[["__scopeId","data-v-0718d315"]]);export{je as default};
