import{d as X,k as Y,l as Z,p as k,r as C,o as x,a as ee,a0 as te,c as _,e as a,y as q,t as l,f as o,w as s,U as ae,g as p,J as N,T as B,s as se,a2 as le,x as g,A as c,i as h,a9 as oe,b as ne,h as n,W as ie,V as ce,M as re,al as ue,a7 as de,H as _e,N as F,am as pe,an as ve,m as fe,Q as ge}from"./index-Bo1QE9TC.js";import{u as me}from"./knowledge-DhPJac-D.js";import{f as he}from"./helpers-BtQK9j-g.js";import{_ as ye}from"./_plugin-vue_export-helper-DlAUqK2U.js";const we={class:"knowledge-list-view"},ke={class:"page-header"},Ce={class:"header-content"},$e={class:"search-section"},ze={class:"categories-section"},be={class:"article-count"},Ae={key:0,class:"active-filter"},Se={class:"articles-section"},Ve={key:0,class:"article-list"},qe=["onClick"],Ne={class:"article-main"},Be={class:"article-title"},Pe={class:"article-summary"},De={class:"article-meta"},Fe={class:"category"},Ke={class:"views"},Ue={class:"date"},Ie={class:"article-tags"},Le={key:2,class:"pagination-wrapper"},Qe=X({__name:"KnowledgeListView",setup(Ee){const $=ee(),K=ne(),{t:P}=Y(),v=me(),U=Z(),I=k(()=>v.loading),z=k(()=>v.articles),L=k(()=>v.categories),Q=k(()=>v.pagination.total),r=C(""),i=C(""),u=C(1),y=C(10),E={Hardware:fe,Software:F,Network:ve,"Account & Access":pe,Email:F,General:_e};x(async()=>{U.setBreadcrumbs([{label:P("nav.dashboard"),path:"/"},{label:P("knowledge.title")}]),$.query.q&&(r.value=$.query.q),await Promise.all([v.fetchCategories(),f()])}),te(()=>$.query.q,e=>{e&&(r.value=e,b())});function H(e){return E[e]||ge}function He(e){return e}function M(e){K.push(`/knowledge/${e}`)}async function f(){await v.fetchPublicArticles(u.value,y.value,r.value||void 0,i.value||void 0)}async function b(){i.value="",u.value=1,await f()}async function R(e){i.value===e?i.value="":i.value=e,r.value="",u.value=1,await f()}async function A(){r.value="",i.value="",u.value=1,await f()}async function T(e){y.value=e,u.value=1,await f()}async function G(e){u.value=e,await f()}return(e,d)=>{const m=p("el-icon"),S=p("el-button"),J=p("el-input"),D=p("el-card"),V=p("el-tag"),W=p("el-empty"),j=p("el-pagination"),O=le("loading");return n(),_("div",we,[a("div",ke,[a("div",Ce,[a("h1",null,l(e.$t("knowledge.title")),1),a("p",null,l(e.$t("knowledge.subtitle")),1)])]),a("div",$e,[o(J,{modelValue:r.value,"onUpdate:modelValue":d[0]||(d[0]=t=>r.value=t),placeholder:e.$t("knowledge.searchPlaceholder"),size:"large",class:"search-input",clearable:"",onKeyup:ae(b,["enter"])},{prefix:s(()=>[o(m,null,{default:s(()=>[o(h(oe))]),_:1})]),append:s(()=>[o(S,{type:"primary",onClick:b},{default:s(()=>[c(l(e.$t("common.search")),1)]),_:1})]),_:1},8,["modelValue","placeholder"])]),a("div",ze,[(n(!0),_(N,null,B(L.value,t=>(n(),g(D,{key:t,class:ce(["category-card",{active:i.value===t}]),onClick:w=>R(t)},{default:s(()=>[o(m,{size:32,class:"category-icon"},{default:s(()=>[(n(),g(ie(H(t))))]),_:2},1024),a("h3",null,l(t),1),a("span",be,l(e.$t("knowledge.viewArticles")),1)]),_:2},1032,["onClick","class"]))),128))]),i.value||r.value?(n(),_("div",Ae,[o(V,{closable:"",onClose:A},{default:s(()=>[c(l(i.value?i.value:`${e.$t("common.search")}: "${r.value}"`),1)]),_:1}),o(S,{text:"",type:"primary",onClick:A},{default:s(()=>[c(l(e.$t("common.clearFilter")),1)]),_:1})])):q("",!0),a("div",Se,[se((n(),g(D,{class:"articles-card"},{default:s(()=>[z.value.length>0?(n(),_("div",Ve,[(n(!0),_(N,null,B(z.value,t=>(n(),_("div",{key:t.id,class:"article-item",onClick:w=>M(t.id)},[a("div",Ne,[a("h3",Be,[c(l(t.title)+" ",1),t.isFAQ?(n(),g(V,{key:0,type:"success",size:"small"},{default:s(()=>[...d[3]||(d[3]=[c("FAQ",-1)])]),_:1})):q("",!0)]),a("p",Pe,l(t.summary),1),a("div",De,[a("span",Fe,[o(m,null,{default:s(()=>[o(h(re))]),_:1}),c(" "+l(t.category),1)]),a("span",Ke,[o(m,null,{default:s(()=>[o(h(ue))]),_:1}),c(" "+l(t.viewCount)+" "+l(e.$t("knowledge.viewCount")),1)]),a("span",Ue,[o(m,null,{default:s(()=>[o(h(de))]),_:1}),c(" "+l(h(he)(t.updatedAt)),1)])])]),a("div",Ie,[(n(!0),_(N,null,B(t.tags.slice(0,3),w=>(n(),g(V,{key:w,size:"small",effect:"plain"},{default:s(()=>[c(l(w),1)]),_:2},1024))),128))])],8,qe))),128))])):(n(),g(W,{key:1,description:e.$t("knowledge.noArticles")},{default:s(()=>[o(S,{type:"primary",onClick:A},{default:s(()=>[c(l(e.$t("knowledge.allCategories")),1)]),_:1})]),_:1},8,["description"])),z.value.length>0?(n(),_("div",Le,[o(j,{"current-page":u.value,"onUpdate:currentPage":d[1]||(d[1]=t=>u.value=t),"page-size":y.value,"onUpdate:pageSize":d[2]||(d[2]=t=>y.value=t),total:Q.value,"page-sizes":[10,20,50],layout:"total, sizes, prev, pager, next",onSizeChange:T,onCurrentChange:G},null,8,["current-page","page-size","total"])])):q("",!0)]),_:1})),[[O,I.value]])])])}}}),Je=ye(Qe,[["__scopeId","data-v-0718d315"]]);export{Je as default};
