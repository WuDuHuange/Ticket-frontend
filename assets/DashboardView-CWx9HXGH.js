import{d as Q,k as X,u as Z,l as j,r as b,n as z,o as G,c as v,f as t,e as s,w as e,g,p as x,t as o,X as ss,q as k,b as ts,i as d,Y as B,y as _,Z as A,_ as es,$ as as,a0 as P,a1 as os,s as V,B as ls,a2 as is,a3 as ns,H as ds,F as N,O as D,Q as T,h as r,S as rs,a4 as R}from"./index-C3uyuHtt.js";import{u as cs}from"./ticket-B5lzEKGK.js";import"./tickets-CV57FQXZ.js";import{_ as us}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BrCbebx6.js";const _s={class:"dashboard"},hs={class:"stat-card stat-card-danger"},vs={class:"stat-content"},ps={class:"stat-value"},fs={class:"stat-icon"},ms={class:"stat-change up"},bs={class:"stat-card stat-card-primary"},gs={class:"stat-content"},ks={class:"stat-value"},ys={class:"stat-label"},$s={class:"stat-icon"},ws={class:"stat-change down"},Ts={class:"stat-card stat-card-warning"},Cs={class:"stat-content"},Ss={class:"stat-value"},zs={class:"stat-label"},As={class:"stat-icon"},Ns={class:"stat-change up"},Ds={class:"stat-card stat-card-success"},Ms={class:"stat-content"},qs={class:"stat-value"},Bs={class:"stat-label"},Ps={class:"stat-icon"},Vs={class:"stat-change up green"},Rs={class:"quick-actions-section"},Ys={class:"section-title"},Is={class:"sla-alert-section"},Us={class:"section-title"},Ws={class:"sla-alert-list"},Fs={class:"alert-content"},Ks={class:"alert-title"},Hs={class:"alert-desc"},Js={class:"alert-time"},Ls={class:"chart-section"},Os={class:"chart-header"},Es={class:"section-title"},Qs={class:"chart-tabs"},Xs={class:"chart-placeholder"},Zs={class:"trend-chart"},js={class:"bar-label"},Gs={class:"chart-section"},xs={class:"chart-header"},st={class:"section-title"},tt={class:"chart-subtitle"},et={class:"chart-placeholder"},at={class:"pie-chart-placeholder"},ot={class:"pie-legend"},lt={class:"legend-label"},it={class:"legend-value"},nt={class:"latest-tickets-section"},dt={class:"section-header"},rt={class:"section-title"},ct=Q({__name:"DashboardView",setup(ut){const Y=ts(),{t:u}=X(),M=Z(),p=cs(),I=j(),C=b(!1),q=b([]),y=b("monthly"),U=z(()=>M.isAdmin),W=z(()=>M.isManager),F=b([{id:1,type:"danger",title:u("dashboard.emergencyResponseRisk"),description:"Work order #TKT-2026-01245 has 30 minutes remaining until the SLA response deadline.",time:"2h ago"},{id:2,type:"warning",title:u("dashboard.expiringSoon"),description:"Work order #TKT-2026-01238 has 2 hours remaining until the resolution deadline.",time:"4h ago"},{id:3,type:"info",title:u("dashboard.allocationReminder"),description:"Work order #TKT-2026-01231 has been awaiting assignment for over 1 hour.",time:"6h ago"}]),K=b([60,75,45,80,65,90]),H=b([{name:"Network",value:35,color:"#409eff"},{name:"Hardware",value:25,color:"#67c23a"},{name:"Software",value:20,color:"#e6a23c"},{name:"Account",value:15,color:"#f56c6c"},{name:"Other",value:5,color:"#909399"}]),$=z(()=>({openTickets:p.tickets.filter(a=>["new","assigned"].includes(a.status)).length||24,inProgressTickets:p.tickets.filter(a=>a.status==="in_progress").length||18,overdueTickets:p.tickets.filter(a=>a.slaBreached).length||7,resolvedToday:p.resolvedTickets.length||32}));G(async()=>{I.setBreadcrumbs([{label:u("nav.dashboard")}]),C.value=!0;try{await p.fetchMyTickets(1,5),q.value=p.tickets.slice(0,5)}finally{C.value=!1}});function h(a){Y.push(a)}function J(a){return{new:u("tickets.statusNew"),assigned:u("tickets.statusAssigned"),in_progress:u("tickets.statusInProgress"),pending_user:u("tickets.statusPendingUser"),resolved:u("tickets.statusResolved"),closed:u("tickets.statusClosed"),cancelled:"Cancelled"}[a]||a}function L(a){return a.charAt(0).toUpperCase()+a.slice(1)}return(a,i)=>{const n=g("el-icon"),c=g("el-col"),w=g("el-row"),S=g("el-button"),f=g("el-table-column"),O=g("el-table"),E=ss("loading");return r(),v("div",_s,[t(w,{gutter:20,class:"stats-row"},{default:e(()=>[t(c,{xs:12,sm:6},{default:e(()=>[s("div",hs,[s("div",vs,[s("div",ps,o($.value.openTickets),1),i[7]||(i[7]=s("div",{class:"stat-label"},"open",-1))]),s("div",fs,[t(n,{size:24,color:"#f56c6c"},{default:e(()=>[t(d(B))]),_:1})]),s("div",ms,[t(n,null,{default:e(()=>[t(d(A))]),_:1}),_(" 5.2% "+o(a.$t("dashboard.fromYesterday")),1)])])]),_:1}),t(c,{xs:12,sm:6},{default:e(()=>[s("div",bs,[s("div",gs,[s("div",ks,o($.value.inProgressTickets),1),s("div",ys,o(a.$t("dashboard.inProgress")),1)]),s("div",$s,[t(n,{size:24,color:"#409eff"},{default:e(()=>[t(d(es))]),_:1})]),s("div",ws,[t(n,null,{default:e(()=>[t(d(as))]),_:1}),_(" 2.1% "+o(a.$t("dashboard.fromYesterday")),1)])])]),_:1}),t(c,{xs:12,sm:6},{default:e(()=>[s("div",Ts,[s("div",Cs,[s("div",Ss,o($.value.overdueTickets),1),s("div",zs,o(a.$t("dashboard.overdue")),1)]),s("div",As,[t(n,{size:24,color:"#e6a23c"},{default:e(()=>[t(d(P))]),_:1})]),s("div",Ns,[t(n,null,{default:e(()=>[t(d(A))]),_:1}),_(" 1.8% "+o(a.$t("dashboard.fromYesterday")),1)])])]),_:1}),t(c,{xs:12,sm:6},{default:e(()=>[s("div",Ds,[s("div",Ms,[s("div",qs,o($.value.resolvedToday),1),s("div",Bs,o(a.$t("dashboard.resolvedToday")),1)]),s("div",Ps,[t(n,{size:24,color:"#67c23a"},{default:e(()=>[t(d(os))]),_:1})]),s("div",Vs,[t(n,null,{default:e(()=>[t(d(A))]),_:1}),_(" 12.4% "+o(a.$t("dashboard.fromYesterday")),1)])])]),_:1})]),_:1}),t(w,{gutter:20,class:"actions-row"},{default:e(()=>[t(c,{xs:24,lg:14},{default:e(()=>[s("div",Rs,[s("h3",Ys,o(a.$t("dashboard.quickActions")),1),t(w,{gutter:16},{default:e(()=>[t(c,{span:12},{default:e(()=>[s("div",{class:"action-card action-card-blue",onClick:i[0]||(i[0]=l=>h("/tickets/create"))},[t(n,{size:24},{default:e(()=>[t(d(ls))]),_:1}),i[8]||(i[8]=s("span",null,"create",-1))])]),_:1}),t(c,{span:12},{default:e(()=>[s("div",{class:"action-card action-card-green",onClick:i[1]||(i[1]=l=>h("/knowledge"))},[t(n,{size:24},{default:e(()=>[t(d(is))]),_:1}),i[9]||(i[9]=s("span",null,"search knowledge",-1))])]),_:1}),W.value?(r(),k(c,{key:0,span:12},{default:e(()=>[s("div",{class:"action-card action-card-pink",onClick:i[2]||(i[2]=l=>h("/admin/analytics"))},[t(n,{size:24},{default:e(()=>[t(d(ns))]),_:1}),i[10]||(i[10]=s("span",null,"analytics",-1))])]),_:1})):V("",!0),U.value?(r(),k(c,{key:1,span:12},{default:e(()=>[s("div",{class:"action-card action-card-purple",onClick:i[3]||(i[3]=l=>h("/admin/users"))},[t(n,{size:24},{default:e(()=>[t(d(ds))]),_:1}),i[11]||(i[11]=s("span",null,"user management",-1))])]),_:1})):V("",!0)]),_:1})])]),_:1}),t(c,{xs:24,lg:10},{default:e(()=>[s("div",Is,[s("h3",Us,o(a.$t("dashboard.slaAlert")),1),s("div",Ws,[(r(!0),v(N,null,D(F.value,l=>(r(),v("div",{key:l.id,class:"sla-alert-item"},[s("div",{class:T(["alert-icon",l.type])},[l.type==="danger"?(r(),k(n,{key:0},{default:e(()=>[t(d(B))]),_:1})):l.type==="warning"?(r(),k(n,{key:1},{default:e(()=>[t(d(P))]),_:1})):(r(),k(n,{key:2},{default:e(()=>[t(d(rs))]),_:1}))],2),s("div",Fs,[s("div",Ks,o(l.title),1),s("div",Hs,o(l.description),1)]),s("div",Js,o(l.time),1)]))),128))])])]),_:1})]),_:1}),t(w,{gutter:20,class:"charts-row"},{default:e(()=>[t(c,{xs:24,lg:14},{default:e(()=>[s("div",Ls,[s("div",Os,[s("h3",Es,o(a.$t("dashboard.orderTrend")),1),s("div",Qs,[s("span",{class:T(["tab",{active:y.value==="monthly"}]),onClick:i[4]||(i[4]=l=>y.value="monthly")},o(a.$t("dashboard.monthly")),3),s("span",{class:T(["tab",{active:y.value==="quarterly"}]),onClick:i[5]||(i[5]=l=>y.value="quarterly")},o(a.$t("dashboard.quarterly")),3)])]),s("div",Xs,[s("div",Zs,[(r(!0),v(N,null,D(K.value,(l,m)=>(r(),v("div",{key:m,class:"bar-wrapper"},[s("div",{class:"bar",style:R({height:l+"%"})},null,4),s("span",js,o(["Jan","Feb","Mar","Apr","May","Jun"][m]),1)]))),128))])])])]),_:1}),t(c,{xs:24,lg:10},{default:e(()=>[s("div",Gs,[s("div",xs,[s("h3",st,o(a.$t("dashboard.categoryDistribution")),1),s("span",tt,o(a.$t("dashboard.thisWeek")),1)]),s("div",et,[s("div",at,[i[12]||(i[12]=s("div",{class:"pie-chart"},null,-1)),s("div",ot,[(r(!0),v(N,null,D(H.value,(l,m)=>(r(),v("div",{class:"legend-item",key:m},[s("span",{class:"legend-color",style:R({background:l.color})},null,4),s("span",lt,o(l.name),1),s("span",it,o(l.value)+"%",1)]))),128))])])])])]),_:1})]),_:1}),s("div",nt,[s("div",dt,[s("h3",rt,o(a.$t("dashboard.latestTickets")),1),t(S,{text:"",type:"primary",onClick:i[6]||(i[6]=l=>h("/tickets"))},{default:e(()=>[_(o(a.$t("dashboard.viewAll")),1)]),_:1})]),x((r(),k(O,{data:q.value,style:{width:"100%"},class:"latest-tickets-table"},{default:e(()=>[t(f,{prop:"id",label:a.$t("dashboard.ticketNo"),width:"160"},null,8,["label"]),t(f,{prop:"requesterName",label:a.$t("dashboard.customer"),width:"120"},{default:e(()=>[...i[13]||(i[13]=[_("xxx",-1)])]),_:1},8,["label"]),t(f,{prop:"category",label:a.$t("common.category"),"min-width":"140"},{default:e(({row:l})=>[_(o(l.category?.name||"N/A"),1)]),_:1},8,["label"]),t(f,{prop:"priority",label:a.$t("common.priority"),width:"100"},{default:e(({row:l})=>[_(o(L(l.priority)),1)]),_:1},8,["label"]),t(f,{prop:"status",label:a.$t("common.status"),width:"120"},{default:e(({row:l})=>[s("span",{class:T(["status-text",`status-${l.status}`])},o(J(l.status)),3)]),_:1},8,["label"]),t(f,{label:a.$t("dashboard.operation"),width:"160"},{default:e(({row:l})=>[t(S,{text:"",type:"primary",size:"small",onClick:m=>h(`/tickets/${l.id}`)},{default:e(()=>[_(o(a.$t("dashboard.detailed")),1)]),_:1},8,["onClick"]),t(S,{text:"",type:"primary",size:"small",onClick:m=>h(`/tickets/${l.id}`)},{default:e(()=>[_(o(a.$t("dashboard.process")),1)]),_:1},8,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[E,C.value]])])])}}}),mt=us(ct,[["__scopeId","data-v-3e4a3f8e"]]);export{mt as default};
