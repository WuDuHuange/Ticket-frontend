import{d as X,p as Y,u as Z,q as j,r as g,s as M,X as J,c as b,a,b as t,t as l,w as e,e as r,o as k,h as u,B as O,Y as Q,Z as W,G as B,i,D as x,C as tt,H as et,v as q,_ as st,y as at,F as lt,l as ot,f as nt,$ as it}from"./index-Myl3Wffr.js";import{u as dt}from"./ticket-b3rCwkfE.js";import{u as ct}from"./knowledge-BHeNciVK.js";import{_ as rt}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ut={class:"dashboard"},_t={class:"welcome-section"},pt={class:"stat-card stat-card-primary"},ft={class:"stat-icon"},mt={class:"stat-content"},vt={class:"stat-value"},kt={class:"stat-label"},ht={class:"stat-card stat-card-warning"},gt={class:"stat-icon"},bt={class:"stat-content"},wt={class:"stat-value"},yt={class:"stat-label"},$t={class:"stat-card stat-card-success"},Ct={class:"stat-icon"},Tt={class:"stat-content"},St={class:"stat-value"},At={class:"stat-label"},zt={class:"stat-card stat-card-info"},Dt={class:"stat-icon"},Mt={class:"stat-content"},Bt={class:"stat-value"},qt={class:"stat-label"},Ut={class:"card-header"},It={class:"card-header"},Nt={class:"card-header"},Pt={class:"article-list"},Vt=["onClick"],Lt={class:"article-title"},Ft={class:"article-meta"},Kt=X({__name:"DashboardView",setup(Rt){const U=nt(),{t:p}=Y(),I=Z(),m=dt(),w=ct(),N=j(),y=g(!1),$=g(!1),S=g([]),A=g([]),P=M(()=>I.user?.name?.split(" ")[0]||"User"),h=M(()=>({totalTickets:m.pagination.total,openTickets:m.openTickets.length,resolvedTickets:m.resolvedTickets.length,kbArticles:w.articles.length}));J(async()=>{N.setBreadcrumbs([{label:p("nav.dashboard")}]),y.value=!0,$.value=!0;try{await m.fetchMyTickets(1,5),S.value=m.tickets.slice(0,5),await w.fetchPublicArticles(1,5),A.value=w.articles.sort((s,n)=>n.viewCount-s.viewCount).slice(0,5)}finally{y.value=!1,$.value=!1}});function _(s){U.push(s)}function V(s){return{new:p("tickets.statusNew"),assigned:p("tickets.statusAssigned"),in_progress:p("tickets.statusInProgress"),pending_user:p("tickets.statusPendingUser"),resolved:p("tickets.statusResolved"),closed:p("tickets.statusClosed"),cancelled:"Cancelled"}[s]||s}function L(s){return{new:"info",assigned:"",in_progress:"warning",pending_user:"warning",resolved:"success",closed:"info",cancelled:"danger"}[s]||""}function F(s){return s.charAt(0).toUpperCase()+s.slice(1)}function K(s){return{low:"info",medium:"",high:"warning",urgent:"danger"}[s]||""}function R(s){return new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}return(s,n)=>{const c=r("el-icon"),d=r("el-col"),C=r("el-row"),f=r("el-button"),T=r("el-card"),v=r("el-table-column"),E=r("el-link"),z=r("el-tag"),G=r("el-table"),D=st("loading");return k(),b("div",ut,[a("div",_t,[a("h1",null,l(s.$t("dashboard.welcome"))+", "+l(P.value)+"!",1),a("p",null,l(s.$t("dashboard.subtitle")),1)]),t(C,{gutter:20,class:"stats-row"},{default:e(()=>[t(d,{xs:24,sm:12,md:6},{default:e(()=>[a("div",pt,[a("div",ft,[t(c,{size:32},{default:e(()=>[t(u(O))]),_:1})]),a("div",mt,[a("div",vt,l(h.value.totalTickets),1),a("div",kt,l(s.$t("admin.totalTickets")),1)])])]),_:1}),t(d,{xs:24,sm:12,md:6},{default:e(()=>[a("div",ht,[a("div",gt,[t(c,{size:32},{default:e(()=>[t(u(Q))]),_:1})]),a("div",bt,[a("div",wt,l(h.value.openTickets),1),a("div",yt,l(s.$t("dashboard.openTickets")),1)])])]),_:1}),t(d,{xs:24,sm:12,md:6},{default:e(()=>[a("div",$t,[a("div",Ct,[t(c,{size:32},{default:e(()=>[t(u(W))]),_:1})]),a("div",Tt,[a("div",St,l(h.value.resolvedTickets),1),a("div",At,l(s.$t("admin.resolved")),1)])])]),_:1}),t(d,{xs:24,sm:12,md:6},{default:e(()=>[a("div",zt,[a("div",Dt,[t(c,{size:32},{default:e(()=>[t(u(B))]),_:1})]),a("div",Mt,[a("div",Bt,l(h.value.kbArticles),1),a("div",qt,l(s.$t("knowledge.articles")),1)])])]),_:1})]),_:1}),t(T,{class:"quick-actions-card"},{header:e(()=>[a("div",Ut,[a("span",null,l(s.$t("dashboard.quickActions")),1)])]),default:e(()=>[t(C,{gutter:20},{default:e(()=>[t(d,{xs:24,sm:12,md:6},{default:e(()=>[t(f,{type:"primary",size:"large",class:"action-btn",onClick:n[0]||(n[0]=o=>_("/tickets/create"))},{default:e(()=>[t(c,null,{default:e(()=>[t(u(x))]),_:1}),i(" "+l(s.$t("tickets.submitTicket")),1)]),_:1})]),_:1}),t(d,{xs:24,sm:12,md:6},{default:e(()=>[t(f,{size:"large",class:"action-btn",onClick:n[1]||(n[1]=o=>_("/my-tickets"))},{default:e(()=>[t(c,null,{default:e(()=>[t(u(tt))]),_:1}),i(" "+l(s.$t("tickets.myTickets")),1)]),_:1})]),_:1}),t(d,{xs:24,sm:12,md:6},{default:e(()=>[t(f,{size:"large",class:"action-btn",onClick:n[2]||(n[2]=o=>_("/knowledge"))},{default:e(()=>[t(c,null,{default:e(()=>[t(u(B))]),_:1}),i(" "+l(s.$t("dashboard.browseKB")),1)]),_:1})]),_:1}),t(d,{xs:24,sm:12,md:6},{default:e(()=>[t(f,{size:"large",class:"action-btn",onClick:n[3]||(n[3]=o=>_("/faq"))},{default:e(()=>[t(c,null,{default:e(()=>[t(u(et))]),_:1}),i(" "+l(s.$t("knowledge.faq")),1)]),_:1})]),_:1})]),_:1})]),_:1}),t(C,{gutter:20,class:"content-row"},{default:e(()=>[t(d,{xs:24,lg:14},{default:e(()=>[t(T,{class:"recent-tickets-card"},{header:e(()=>[a("div",It,[a("span",null,l(s.$t("dashboard.recentTickets")),1),t(f,{text:"",type:"primary",onClick:n[4]||(n[4]=o=>_("/my-tickets"))},{default:e(()=>[i(l(s.$t("dashboard.viewAll")),1)]),_:1})])]),default:e(()=>[q((k(),at(G,{data:S.value,style:{width:"100%"}},{default:e(()=>[t(v,{prop:"id",label:s.$t("tickets.ticketId"),width:"140"},null,8,["label"]),t(v,{prop:"title",label:s.$t("common.title"),"min-width":"200"},{default:e(({row:o})=>[t(E,{type:"primary",onClick:H=>_(`/tickets/${o.id}`)},{default:e(()=>[i(l(o.title),1)]),_:2},1032,["onClick"])]),_:1},8,["label"]),t(v,{prop:"status",label:s.$t("common.status"),width:"120"},{default:e(({row:o})=>[t(z,{type:L(o.status),size:"small"},{default:e(()=>[i(l(V(o.status)),1)]),_:2},1032,["type"])]),_:1},8,["label"]),t(v,{prop:"priority",label:s.$t("common.priority"),width:"100"},{default:e(({row:o})=>[t(z,{type:K(o.priority),size:"small",effect:"plain"},{default:e(()=>[i(l(F(o.priority)),1)]),_:2},1032,["type"])]),_:1},8,["label"]),t(v,{prop:"createdAt",label:s.$t("common.created"),width:"140"},{default:e(({row:o})=>[i(l(R(o.createdAt)),1)]),_:1},8,["label"])]),_:1},8,["data"])),[[D,y.value]])]),_:1})]),_:1}),t(d,{xs:24,lg:10},{default:e(()=>[t(T,{class:"kb-articles-card"},{header:e(()=>[a("div",Nt,[a("span",null,l(s.$t("dashboard.popularArticles")),1),t(f,{text:"",type:"primary",onClick:n[5]||(n[5]=o=>_("/knowledge"))},{default:e(()=>[i(l(s.$t("dashboard.viewAll")),1)]),_:1})])]),default:e(()=>[q((k(),b("div",Pt,[(k(!0),b(lt,null,ot(A.value,o=>(k(),b("div",{key:o.id,class:"article-item",onClick:H=>_(`/knowledge/${o.id}`)},[a("div",Lt,l(o.title),1),a("div",Ft,[t(c,null,{default:e(()=>[t(u(it))]),_:1}),i(" "+l(o.viewCount)+" "+l(s.$t("knowledge.viewCount")),1)])],8,Vt))),128))])),[[D,$.value]])]),_:1})]),_:1})]),_:1})])}}}),Yt=rt(Kt,[["__scopeId","data-v-1d76aa19"]]);export{Yt as default};
