import{d as he,k as ge,u as ye,l as ke,r as B,n as _,a as be,c as p,f as e,w as t,g as o,e as r,p as we,i as s,m as $e,v as Ce,t as n,q as m,s as h,x as Me,y as i,z as I,A as Se,B as Ne,C as Ae,D as xe,F as Te,G as A,H as D,I as Ue,J as Ve,K as qe,L as ze,M as Be,N as R,O as Ie,P as De,Q as K,R as Re,S as L,T as P,U as j,V as Ke,W as Le,X as Pe,b as je,h as d}from"./index-C6r5wVjW.js";import{_ as Ee}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Fe={class:"main-layout"},Qe={class:"logo-container"},We={class:"sidebar-footer"},Ge={class:"header-left"},He={class:"header-right"},Je={class:"notification-panel"},Oe={class:"notification-header"},Xe={class:"notification-title"},Ye={key:0,class:"notification-empty"},Ze={key:1,class:"notification-list"},et=["onClick"],tt={class:"notification-content"},at={class:"notification-text"},nt={class:"notification-time"},lt={class:"user-info"},ot={class:"user-name"},st=he({__name:"MainLayout",setup(it){const{t:k}=ge(),E=be(),b=je(),f=ye(),M=ke(),w=B(""),g=B([]),x=_(()=>g.value.filter(a=>!a.read).length);function F(a){switch(a){case"ticket":return I;case"system":return R;default:return j}}function Q(a){const l=new Date().getTime()-a.getTime(),u=Math.floor(l/(1e3*60)),v=Math.floor(l/(1e3*60*60)),S=Math.floor(l/(1e3*60*60*24));return u<1?k("common.justNow"):u<60?k("common.minutesAgo",{n:u}):v<24?k("common.hoursAgo",{n:v}):k("common.daysAgo",{n:S})}function W(a){a.read=!0,a.link&&b.push(a.link)}function G(){g.value.forEach(a=>a.read=!0)}const $=_(()=>M.sidebarCollapsed),H=_(()=>$.value?"64px":"220px"),J=_(()=>E.path),O=_(()=>M.breadcrumbs),X=_(()=>f.userName||"User"),Y=_(()=>f.userAvatar),Z=_(()=>(f.userName||"U").split(" ").map(y=>y[0]).join("").toUpperCase().slice(0,2)),T=_(()=>f.isStaff),U=_(()=>f.isManager),V=_(()=>f.isAdmin);function ee(){M.toggleSidebar()}function te(){w.value&&b.push({path:"/knowledge",query:{q:w.value}})}async function ae(a){switch(a){case"profile":b.push("/profile");break;case"logout":await f.logout(),b.push("/login");break}}return(a,y)=>{const l=o("el-icon"),u=o("el-menu-item"),v=o("el-divider"),S=o("el-sub-menu"),ne=o("el-menu"),N=o("el-button"),le=o("el-aside"),oe=o("el-breadcrumb-item"),se=o("el-breadcrumb"),ie=o("el-input"),ue=o("el-badge"),de=o("el-empty"),ce=o("el-popover"),re=o("el-avatar"),q=o("el-dropdown-item"),_e=o("el-dropdown-menu"),me=o("el-dropdown"),fe=o("el-header"),pe=o("router-view"),ve=o("el-main"),z=o("el-container");return d(),p("div",Fe,[e(z,{class:"layout-container"},{default:t(()=>[e(le,{width:H.value,class:"sidebar"},{default:t(()=>[r("div",Qe,[e(l,{size:28,class:"logo-icon"},{default:t(()=>[e(s($e))]),_:1}),we(r("span",{class:"logo-text"},n(a.$t("header.title")),513),[[Ce,!$.value]])]),e(ne,{"default-active":J.value,class:"sidebar-menu",collapse:$.value,router:""},{default:t(()=>[e(u,{index:"/"},{title:t(()=>[i(n(a.$t("nav.dashboard")),1)]),default:t(()=>[e(l,null,{default:t(()=>[e(s(Me))]),_:1})]),_:1}),T.value?(d(),m(u,{key:0,index:"/tickets"},{title:t(()=>[i(n(a.$t("nav.allTickets")),1)]),default:t(()=>[e(l,null,{default:t(()=>[e(s(I))]),_:1})]),_:1})):h("",!0),e(u,{index:"/my-tickets"},{title:t(()=>[i(n(a.$t("nav.myTickets")),1)]),default:t(()=>[e(l,null,{default:t(()=>[e(s(Se))]),_:1})]),_:1}),e(u,{index:"/tickets/create"},{title:t(()=>[i(n(a.$t("nav.submitTicket")),1)]),default:t(()=>[e(l,null,{default:t(()=>[e(s(Ne))]),_:1})]),_:1}),e(v),e(u,{index:"/knowledge"},{title:t(()=>[i(n(a.$t("nav.knowledgeBase")),1)]),default:t(()=>[e(l,null,{default:t(()=>[e(s(Ae))]),_:1})]),_:1}),e(u,{index:"/faq"},{title:t(()=>[i(n(a.$t("nav.faq")),1)]),default:t(()=>[e(l,null,{default:t(()=>[e(s(xe))]),_:1})]),_:1}),T.value&&!U.value?(d(),m(u,{key:1,index:"/admin/articles"},{title:t(()=>[i(n(a.$t("nav.articleManagement")),1)]),default:t(()=>[e(l,null,{default:t(()=>[e(s(Te))]),_:1})]),_:1})):h("",!0),U.value?(d(),p(A,{key:2},[e(v),e(S,{index:"/admin"},{title:t(()=>[e(l,null,{default:t(()=>[e(s(R))]),_:1}),r("span",null,n(a.$t("nav.administration")),1)]),default:t(()=>[V.value?(d(),m(u,{key:0,index:"/admin/users"},{default:t(()=>[e(l,null,{default:t(()=>[e(s(D))]),_:1}),i(" "+n(a.$t("nav.userManagement")),1)]),_:1})):h("",!0),e(u,{index:"/admin/teams"},{default:t(()=>[e(l,null,{default:t(()=>[e(s(Ue))]),_:1}),i(" "+n(a.$t("nav.teamManagement")),1)]),_:1}),e(u,{index:"/admin/categories"},{default:t(()=>[e(l,null,{default:t(()=>[e(s(Ve))]),_:1}),i(" "+n(a.$t("nav.categoryManagement")||"Category Management"),1)]),_:1}),e(u,{index:"/admin/articles"},{default:t(()=>[e(l,null,{default:t(()=>[e(s(qe))]),_:1}),i(" "+n(a.$t("nav.articleManagement")),1)]),_:1}),e(u,{index:"/admin/analytics"},{default:t(()=>[e(l,null,{default:t(()=>[e(s(ze))]),_:1}),i(" "+n(a.$t("nav.analytics")),1)]),_:1}),V.value?(d(),m(u,{key:1,index:"/admin/settings"},{default:t(()=>[e(l,null,{default:t(()=>[e(s(Be))]),_:1}),i(" "+n(a.$t("nav.systemSettings")),1)]),_:1})):h("",!0)]),_:1})],64)):h("",!0)]),_:1},8,["default-active","collapse"]),r("div",We,[e(N,{icon:$.value?s(Ie):s(De),onClick:ee,text:"",class:"collapse-btn"},null,8,["icon"])])]),_:1},8,["width"]),e(z,{class:"main-container"},{default:t(()=>[e(fe,{class:"header"},{default:t(()=>[r("div",Ge,[e(se,{separator:"/"},{default:t(()=>[(d(!0),p(A,null,K(O.value,(c,C)=>(d(),m(oe,{key:C,to:c.path?{path:c.path}:void 0},{default:t(()=>[i(n(c.label),1)]),_:2},1032,["to"]))),128))]),_:1})]),r("div",He,[e(ie,{modelValue:w.value,"onUpdate:modelValue":y[0]||(y[0]=c=>w.value=c),placeholder:a.$t("common.search"),"prefix-icon":"Search",class:"search-input",clearable:"",onKeyup:Re(te,["enter"])},null,8,["modelValue","placeholder"]),e(ce,{placement:"bottom-end",width:360,trigger:"click"},{reference:t(()=>[e(ue,{value:x.value,hidden:x.value===0,class:"notification-badge"},{default:t(()=>[e(N,{icon:s(j),circle:""},null,8,["icon"])]),_:1},8,["value","hidden"])]),default:t(()=>[r("div",Je,[r("div",Oe,[r("span",Xe,n(a.$t("nav.notifications")),1),g.value.length>0?(d(),m(N,{key:0,type:"primary",link:"",size:"small",onClick:G},{default:t(()=>[i(n(a.$t("profile.markAllRead")),1)]),_:1})):h("",!0)]),e(v,{style:{margin:"8px 0"}}),g.value.length===0?(d(),p("div",Ye,[e(de,{description:a.$t("nav.noNotifications"),"image-size":60},null,8,["description"])])):(d(),p("div",Ze,[(d(!0),p(A,null,K(g.value,c=>(d(),p("div",{key:c.id,class:L(["notification-item",{unread:!c.read}]),onClick:C=>W(c)},[e(l,{class:L(["notification-icon",c.type])},{default:t(()=>[(d(),m(P(F(c.type))))]),_:2},1032,["class"]),r("div",tt,[r("div",at,n(c.message),1),r("div",nt,n(Q(c.time)),1)])],10,et))),128))]))])]),_:1}),e(me,{trigger:"click",onCommand:ae},{dropdown:t(()=>[e(_e,null,{default:t(()=>[e(q,{command:"profile"},{default:t(()=>[e(l,null,{default:t(()=>[e(s(D))]),_:1}),i(" "+n(a.$t("nav.myProfile")),1)]),_:1}),e(q,{divided:"",command:"logout"},{default:t(()=>[e(l,null,{default:t(()=>[e(s(Le))]),_:1}),i(" "+n(a.$t("common.logout")),1)]),_:1})]),_:1})]),default:t(()=>[r("div",lt,[e(re,{size:32,src:Y.value},{default:t(()=>[i(n(Z.value),1)]),_:1},8,["src"]),r("span",ot,n(X.value),1),e(l,null,{default:t(()=>[e(s(Ke))]),_:1})])]),_:1})])]),_:1}),e(ve,{class:"main-content"},{default:t(()=>[e(pe,null,{default:t(({Component:c,route:C})=>[(d(),m(Pe,{max:10},[(d(),m(P(c),{key:C.fullPath}))],1024))]),_:1})]),_:1})]),_:1})]),_:1})])}}}),ct=Ee(st,[["__scopeId","data-v-c30a2472"]]);export{ct as default};
