import{d as W,k as X,l as Y,n as k,r as C,o as x,a as ee,Z as te,c as _,e as a,s as q,t as l,f as o,w as s,R as ae,g as p,G as N,Q as B,p as se,$ as le,q as f,y as c,i as h,a6 as oe,b as ne,h as n,T as ie,S as ce,J as re,ag as ue,a4 as de,D as _e,K as P,ah as pe,ai as ve,m as ge,N as fe}from"./index-DaxlKADp.js";import{u as me}from"./knowledge-CosiKhUa.js";import{f as he}from"./helpers-BtQK9j-g.js";import{_ as ye}from"./_plugin-vue_export-helper-DlAUqK2U.js";const we={class:"knowledge-list-view"},ke={class:"page-header"},Ce={class:"header-content"},$e={class:"search-section"},ze={class:"categories-section"},Se={class:"article-count"},be={key:0,class:"active-filter"},Ae={class:"articles-section"},Ve={key:0,class:"article-list"},qe=["onClick"],Ne={class:"article-main"},Be={class:"article-title"},De={class:"article-summary"},Ke={class:"article-meta"},Pe={class:"category"},Fe={class:"views"},Ie={class:"date"},Ue={class:"article-tags"},Le={key:2,class:"pagination-wrapper"},Qe=W({__name:"KnowledgeListView",setup(Re){const $=ee(),F=ne(),{t:D}=X(),v=me(),I=Y(),U=k(()=>v.loading),z=k(()=>v.articles),L=k(()=>v.categories),Q=k(()=>v.pagination.total),r=C(""),i=C(""),u=C(1),y=C(10),R={Hardware:ge,Software:P,Network:ve,"Account & Access":pe,Email:P,General:_e};x(async()=>{I.setBreadcrumbs([{label:D("nav.dashboard"),path:"/"},{label:D("knowledge.title")}]),$.query.q&&(r.value=$.query.q),await Promise.all([v.fetchCategories(),g()])}),te(()=>$.query.q,e=>{e&&(r.value=e,S())});function E(e){return R[e]||fe}function Ee(e){return e}function G(e){F.push(`/knowledge/${e}`)}async function g(){await v.fetchPublicArticles(u.value,y.value,r.value||void 0,i.value||void 0)}async function S(){i.value="",u.value=1,await g()}async function T(e){i.value===e?i.value="":i.value=e,r.value="",u.value=1,await g()}async function b(){r.value="",i.value="",u.value=1,await g()}async function H(e){y.value=e,u.value=1,await g()}async function J(e){u.value=e,await g()}return(e,d)=>{const m=p("el-icon"),A=p("el-button"),M=p("el-input"),K=p("el-card"),V=p("el-tag"),Z=p("el-empty"),j=p("el-pagination"),O=le("loading");return n(),_("div",we,[a("div",ke,[a("div",Ce,[a("h1",null,l(e.$t("knowledge.title")),1),a("p",null,l(e.$t("knowledge.subtitle")),1)])]),a("div",$e,[o(M,{modelValue:r.value,"onUpdate:modelValue":d[0]||(d[0]=t=>r.value=t),placeholder:e.$t("knowledge.searchPlaceholder"),size:"large",class:"search-input",clearable:"",onKeyup:ae(S,["enter"])},{prefix:s(()=>[o(m,null,{default:s(()=>[o(h(oe))]),_:1})]),append:s(()=>[o(A,{type:"primary",onClick:S},{default:s(()=>[c(l(e.$t("common.search")),1)]),_:1})]),_:1},8,["modelValue","placeholder"])]),a("div",ze,[(n(!0),_(N,null,B(L.value,t=>(n(),f(K,{key:t,class:ce(["category-card",{active:i.value===t}]),onClick:w=>T(t)},{default:s(()=>[o(m,{size:32,class:"category-icon"},{default:s(()=>[(n(),f(ie(E(t))))]),_:2},1024),a("h3",null,l(t),1),a("span",Se,l(e.$t("knowledge.viewArticles")),1)]),_:2},1032,["onClick","class"]))),128))]),i.value||r.value?(n(),_("div",be,[o(V,{closable:"",onClose:b},{default:s(()=>[c(l(i.value?i.value:`${e.$t("common.search")}: "${r.value}"`),1)]),_:1}),o(A,{text:"",type:"primary",onClick:b},{default:s(()=>[c(l(e.$t("common.clearFilter")),1)]),_:1})])):q("",!0),a("div",Ae,[se((n(),f(K,{class:"articles-card"},{default:s(()=>[z.value.length>0?(n(),_("div",Ve,[(n(!0),_(N,null,B(z.value,t=>(n(),_("div",{key:t.id,class:"article-item",onClick:w=>G(t.id)},[a("div",Ne,[a("h3",Be,[c(l(t.title)+" ",1),t.isFAQ?(n(),f(V,{key:0,type:"success",size:"small"},{default:s(()=>[...d[3]||(d[3]=[c("FAQ",-1)])]),_:1})):q("",!0)]),a("p",De,l(t.summary),1),a("div",Ke,[a("span",Pe,[o(m,null,{default:s(()=>[o(h(re))]),_:1}),c(" "+l(t.category),1)]),a("span",Fe,[o(m,null,{default:s(()=>[o(h(ue))]),_:1}),c(" "+l(t.viewCount)+" "+l(e.$t("knowledge.viewCount")),1)]),a("span",Ie,[o(m,null,{default:s(()=>[o(h(de))]),_:1}),c(" "+l(h(he)(t.updatedAt)),1)])])]),a("div",Ue,[(n(!0),_(N,null,B(t.tags.slice(0,3),w=>(n(),f(V,{key:w,size:"small",effect:"plain"},{default:s(()=>[c(l(w),1)]),_:2},1024))),128))])],8,qe))),128))])):(n(),f(Z,{key:1,description:e.$t("knowledge.noArticles")},{default:s(()=>[o(A,{type:"primary",onClick:b},{default:s(()=>[c(l(e.$t("knowledge.allCategories")),1)]),_:1})]),_:1},8,["description"])),z.value.length>0?(n(),_("div",Le,[o(j,{"current-page":u.value,"onUpdate:currentPage":d[1]||(d[1]=t=>u.value=t),"page-size":y.value,"onUpdate:pageSize":d[2]||(d[2]=t=>y.value=t),total:Q.value,"page-sizes":[10,20,50],layout:"total, sizes, prev, pager, next",onSizeChange:H,onCurrentChange:J},null,8,["current-page","page-size","total"])])):q("",!0)]),_:1})),[[O,U.value]])])])}}}),Me=ye(Qe,[["__scopeId","data-v-0718d315"]]);export{Me as default};
