import{d as q,p as E,q as L,s as v,a0 as X,X as G,c as H,a as _,b as t,t as i,w as l,e as s,o as h,i as r,h as f,D as J,P as O,v as Q,_ as W,y as C,z as Y,f as Z}from"./index-Myl3Wffr.js";import{u as x}from"./ticket-b3rCwkfE.js";import{g as ee,a as te,f as ae,b as le,d as se}from"./helpers-BtW4N_bD.js";import{_ as oe}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ne={class:"my-tickets-view"},ie={class:"page-header"},re={class:"ticket-title"},ce={class:"pagination-wrapper"},ue=q({__name:"MyTicketsView",setup(de){const w=Z(),{t:c}=E(),u=x(),T=L(),S=v(()=>u.loading),z=v(()=>u.tickets),d=v(()=>u.pagination),n=X({status:"",keyword:""});function V(e){return{new:c("tickets.statusNew"),assigned:c("tickets.statusAssigned"),in_progress:c("tickets.statusInProgress"),pending_user:c("tickets.statusPendingUser"),resolved:c("tickets.statusResolved"),closed:c("tickets.statusClosed")}[e]||e}G(async()=>{T.setBreadcrumbs([{label:c("nav.dashboard"),path:"/"},{label:c("nav.myTickets")}]),await u.fetchMyTickets(1,10)});function M(){w.push("/tickets/create")}function P(e){w.push(`/tickets/${e.id}`)}async function g(){await u.fetchMyTickets(1,d.value.pageSize,n.status||void 0)}async function A(){n.status="",n.keyword="",await u.fetchMyTickets(1,d.value.pageSize)}async function B(e){await u.fetchMyTickets(1,e,n.status||void 0)}async function N(e){await u.fetchMyTickets(e,d.value.pageSize,n.status||void 0)}return(e,o)=>{const U=s("el-icon"),k=s("el-button"),m=s("el-option"),I=s("el-select"),b=s("el-form-item"),D=s("el-input"),R=s("el-form"),$=s("el-card"),p=s("el-table-column"),y=s("el-tag"),F=s("el-table"),K=s("el-pagination"),j=W("loading");return h(),H("div",ne,[_("div",ie,[_("h1",null,i(e.$t("tickets.myTickets")),1),t(k,{type:"primary",onClick:M},{default:l(()=>[t(U,null,{default:l(()=>[t(f(J))]),_:1}),r(" "+i(e.$t("dashboard.newTicket")),1)]),_:1})]),t($,{class:"filter-card"},{default:l(()=>[t(R,{inline:!0,model:n,class:"filter-form"},{default:l(()=>[t(b,{label:e.$t("common.status")},{default:l(()=>[t(I,{modelValue:n.status,"onUpdate:modelValue":o[0]||(o[0]=a=>n.status=a),placeholder:e.$t("tickets.filterByStatus"),clearable:"",onChange:g},{default:l(()=>[t(m,{label:e.$t("tickets.statusNew"),value:"new"},null,8,["label"]),t(m,{label:e.$t("tickets.statusAssigned"),value:"assigned"},null,8,["label"]),t(m,{label:e.$t("tickets.statusInProgress"),value:"in_progress"},null,8,["label"]),t(m,{label:e.$t("tickets.statusPendingUser"),value:"pending_user"},null,8,["label"]),t(m,{label:e.$t("tickets.statusResolved"),value:"resolved"},null,8,["label"]),t(m,{label:e.$t("tickets.statusClosed"),value:"closed"},null,8,["label"])]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),t(b,{label:e.$t("common.search")},{default:l(()=>[t(D,{modelValue:n.keyword,"onUpdate:modelValue":o[1]||(o[1]=a=>n.keyword=a),placeholder:e.$t("tickets.searchTickets"),clearable:"",onKeyup:O(g,["enter"]),onClear:g},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(b,null,{default:l(()=>[t(k,{type:"primary",onClick:g},{default:l(()=>[r(i(e.$t("common.search")),1)]),_:1}),t(k,{onClick:A},{default:l(()=>[r(i(e.$t("common.reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t($,{class:"table-card"},{default:l(()=>[Q((h(),C(F,{data:z.value,style:{width:"100%"},onRowClick:P,"row-class-name":"clickable-row"},{default:l(()=>[t(p,{prop:"id",label:e.$t("tickets.ticketId"),width:"150"},null,8,["label"]),t(p,{prop:"title",label:e.$t("common.title"),"min-width":"250"},{default:l(({row:a})=>[_("div",re,[_("span",null,i(a.title),1),a.slaBreached?(h(),C(y,{key:0,type:"danger",size:"small"},{default:l(()=>[...o[4]||(o[4]=[r("SLA",-1)])]),_:1})):Y("",!0)])]),_:1},8,["label"]),t(p,{prop:"category",label:e.$t("common.category"),width:"150"},{default:l(({row:a})=>[r(i(a.category?.name||"N/A"),1)]),_:1},8,["label"]),t(p,{prop:"status",label:e.$t("common.status"),width:"130"},{default:l(({row:a})=>[t(y,{type:f(ee)(a.status),size:"small"},{default:l(()=>[r(i(V(a.status)),1)]),_:2},1032,["type"])]),_:1},8,["label"]),t(p,{prop:"priority",label:e.$t("common.priority"),width:"110"},{default:l(({row:a})=>[t(y,{type:f(te)(a.priority),size:"small",effect:"plain"},{default:l(()=>[r(i(f(ae)(a.priority)),1)]),_:2},1032,["type"])]),_:1},8,["label"]),t(p,{prop:"createdAt",label:e.$t("common.created"),width:"140"},{default:l(({row:a})=>[r(i(f(le)(a.createdAt)),1)]),_:1},8,["label"]),t(p,{prop:"updatedAt",label:e.$t("common.updated"),width:"140"},{default:l(({row:a})=>[r(i(f(se)(a.updatedAt)),1)]),_:1},8,["label"])]),_:1},8,["data"])),[[j,S.value]]),_("div",ce,[t(K,{"current-page":d.value.page,"onUpdate:currentPage":o[2]||(o[2]=a=>d.value.page=a),"page-size":d.value.pageSize,"onUpdate:pageSize":o[3]||(o[3]=a=>d.value.pageSize=a),total:d.value.total,"page-sizes":[10,20,50],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:B,onCurrentChange:N},null,8,["current-page","page-size","total"])])]),_:1})])}}}),ge=oe(ue,[["__scopeId","data-v-a06b7580"]]);export{ge as default};
