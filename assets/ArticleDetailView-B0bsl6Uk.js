import{d as j,k as G,l as L,n as T,r as I,o as P,a as U,p as J,$ as O,c as v,q as h,s as $,G as C,e as s,f as e,w as t,g as _,y as n,i as d,aa as W,t as a,H as X,a4 as Y,ag as Z,a5 as x,aj as ee,Q as S,K as te,z as le,b as ae,E as se,h as u}from"./index-C6r5wVjW.js";import{u as oe}from"./knowledge-DArXDcJQ.js";import{a as ne}from"./index-Bs1MdxVt.js";/* empty css                */import{f as de}from"./helpers-BtQK9j-g.js";import{_ as ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ue={class:"article-detail-view"},ce={class:"page-header"},re={class:"article-header"},_e={class:"article-tags"},fe={class:"article-title"},pe={class:"article-meta"},ke={class:"article-content"},ve={class:"feedback-section"},ge={class:"feedback-buttons"},me={class:"tag-list"},he={class:"related-list"},we=["onClick"],ye=j({__name:"ArticleDetailView",setup(be){const H=U(),g=ae(),{t:w}=G(),f=oe(),q=L(),A=T(()=>f.loading),o=T(()=>f.currentArticle),p=I(null),y=I([]);P(async()=>{const l=H.params.id;await f.fetchArticleById(l),o.value&&(q.setBreadcrumbs([{label:w("nav.dashboard"),path:"/"},{label:w("knowledge.title"),path:"/knowledge"},{label:o.value.title}]),await f.fetchPublicArticles(1,5,void 0,o.value.category),y.value=f.articles.filter(c=>c.id!==o.value?.id).slice(0,4))});function B(){g.push("/knowledge")}function E(l){g.push(`/knowledge/${l}`)}function K(l){g.push({path:"/knowledge",query:{q:l}})}function Q(){g.push("/tickets/create")}function N(l){if(p.value===l){p.value=null;return}p.value=l,se.success(w("knowledge.thanksFeedback"))}return(l,c)=>{const r=_("el-icon"),k=_("el-button"),b=_("el-tag"),V=_("el-divider"),m=_("el-card"),D=_("el-col"),F=_("el-empty"),R=_("el-row"),z=O("loading");return J((u(),v("div",ue,[o.value?(u(),v(C,{key:0},[s("div",ce,[e(k,{text:"",onClick:B},{default:t(()=>[e(r,null,{default:t(()=>[e(d(W))]),_:1}),n(" "+a(l.$t("knowledge.backToKB")),1)]),_:1})]),e(R,{gutter:24},{default:t(()=>[e(D,{xs:24,lg:18},{default:t(()=>[e(m,{class:"article-card"},{default:t(()=>[s("div",re,[s("div",_e,[e(b,{type:"info"},{default:t(()=>[n(a(o.value.category),1)]),_:1}),o.value.isFAQ?(u(),h(b,{key:0,type:"success"},{default:t(()=>[...c[2]||(c[2]=[n("FAQ",-1)])]),_:1})):$("",!0)]),s("h1",fe,a(o.value.title),1),s("div",pe,[s("span",null,[e(r,null,{default:t(()=>[e(d(X))]),_:1}),n(" "+a(o.value.authorName),1)]),s("span",null,[e(r,null,{default:t(()=>[e(d(Y))]),_:1}),n(" "+a(l.$t("knowledge.updated"))+" "+a(d(de)(o.value.updatedAt,"long")),1)]),s("span",null,[e(r,null,{default:t(()=>[e(d(Z))]),_:1}),n(" "+a(o.value.viewCount)+" "+a(l.$t("knowledge.viewCount")),1)])])]),e(V),s("div",ke,[e(d(ne),{modelValue:o.value.content,previewTheme:"github"},null,8,["modelValue"])]),e(V),s("div",ve,[s("h3",null,a(l.$t("knowledge.helpful")),1),s("div",ge,[e(k,{type:p.value==="helpful"?"success":"default",onClick:c[0]||(c[0]=i=>N("helpful"))},{default:t(()=>[e(r,null,{default:t(()=>[e(d(x))]),_:1}),n(" "+a(l.$t("knowledge.yes"))+" ("+a(o.value.helpfulCount)+") ",1)]),_:1},8,["type"]),e(k,{type:p.value==="not_helpful"?"danger":"default",onClick:c[1]||(c[1]=i=>N("not_helpful"))},{default:t(()=>[e(r,null,{default:t(()=>[e(d(ee))]),_:1}),n(" "+a(l.$t("knowledge.no"))+" ("+a(o.value.notHelpfulCount)+") ",1)]),_:1},8,["type"])])])]),_:1})]),_:1}),e(D,{xs:24,lg:6},{default:t(()=>[e(m,{class:"sidebar-card"},{header:t(()=>[s("span",null,a(l.$t("knowledge.tags")),1)]),default:t(()=>[s("div",me,[(u(!0),v(C,null,S(o.value.tags,i=>(u(),h(b,{key:i,effect:"plain",onClick:M=>K(i),class:"clickable-tag"},{default:t(()=>[n(a(i),1)]),_:2},1032,["onClick"]))),128))])]),_:1}),e(m,{class:"sidebar-card"},{header:t(()=>[s("span",null,a(l.$t("knowledge.relatedArticles")),1)]),default:t(()=>[s("div",he,[(u(!0),v(C,null,S(y.value,i=>(u(),v("div",{key:i.id,class:"related-item",onClick:M=>E(i.id)},[e(r,null,{default:t(()=>[e(d(te))]),_:1}),s("span",null,a(i.title),1)],8,we))),128)),y.value.length===0?(u(),h(F,{key:0,description:l.$t("knowledge.noRelated"),"image-size":60},null,8,["description"])):$("",!0)])]),_:1}),e(m,{class:"sidebar-card help-card"},{default:t(()=>[s("h3",null,a(l.$t("knowledge.stillNeedHelp")),1),s("p",null,a(l.$t("knowledge.stillNeedHelpDesc")),1),e(k,{type:"primary",onClick:Q},{default:t(()=>[e(r,null,{default:t(()=>[e(d(le))]),_:1}),n(" "+a(l.$t("knowledge.submitTicket")),1)]),_:1})]),_:1})]),_:1})]),_:1})],64)):A.value?$("",!0):(u(),h(F,{key:1,description:l.$t("knowledge.articleNotFound")},{default:t(()=>[e(k,{type:"primary",onClick:B},{default:t(()=>[n(a(l.$t("knowledge.goBack")),1)]),_:1})]),_:1},8,["description"]))])),[[z,A.value]])}}}),De=ie(ye,[["__scopeId","data-v-0d2645ef"]]);export{De as default};
